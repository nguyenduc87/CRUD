<!DOCTYPE html>
<html>
<head>
<title>Task 27.110 chi tiêt đơn hàng</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- font -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<!-- Bootstrap -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<body onload="onPageLoading()">

  <!-- Menu -->
  <div class="container-fluid bg-light">
    <div class="row">
      <div class="col-sm-12">
        <nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light">
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav nav-fill w-100">
              <li class="nav-item active">
                <a class="nav-link" href="#">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#menu">Menu</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#about">Loại Pizza</a>
              </li>
              <li class="nav-item">  <!-- đổi thành dạng click để dễ xử lý-->
                <button class="btn" id="btn-order-detail" onclick = "onNavOrderDetailClick()" > Order Detail</button>
              </li>
            </ul>
          </div>
        </nav>
      </div>  
    </div>
  </div>

  <!-- Content -->
  <div class="container" style="padding: 120px 0 50px 0;">
    <div class="row">
      <div class="col-sm-12">
        <div class="row">
          <!-- Title row home -->
          <div class="col-sm-12">
            <h1><b>Pizza 365
              Truly italian !
              </b></h1>
          </div>

          <!-- Slide row home -->
          <div class="col-sm-12">
            <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
              <ol class="carousel-indicators">
                <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="4"></li>
              </ol>
              <div class="carousel-inner">
                <div class="carousel-item active">
                  <img class="d-block w-100" src="images/mon_y_1.jpg" alt="First slide">
                </div>
                <div class="carousel-item">
                  <img class="d-block w-100" src="images/mon_y_2.jpg" alt="Second slide">
                </div>
                <div class="carousel-item">
                  <img class="d-block w-100" src="images/mon_y_3.jpg" alt="Third slide">
                </div>
                <div class="carousel-item">
                  <img class="d-block w-100" src="images/mon_y_4.jpg" alt="Third slide">
                </div>
                <div class="carousel-item">
                  <img class="d-block w-100" src="images/mon_y_5.jpg" alt="Third slide">
                </div>
              </div>
              <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
              </a>
              <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
              </a>
            </div>
          </div>

          <!-- Title what we offer -->
          <div class="col-sm-12 text-center p-4 mt-4">
            <h2><b class="p-2 border-bottom">Tại sao lại Pizza 365</b></h2>
          </div>

          <!-- Content what we offer -->
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-3 p-4 bg-warning border">
                <h3 class="p-2">Không gian quán</h3>
                <p class="p-2">Không gian quán rộng rãi, thoáng mát, ấm cúng mang phong cách châu âu.</p>
              </div>
              <div class="col-sm-3 p-4 bg-light border">
                <h3 class="p-2">Phục vụ</h3>
                <p class="p-2">Nhân viên nhiệt tình, lễ phép luôn lấy khách hàng làm trọng tâm để phục vụ..</p>
              </div>
              <div class="col-sm-3 p-4 bg-info text-white border">
                <h3 class="p-2">Chất lượng</h3>
                <p class="p-2">Rất thơm ngon với các loại nhân đa dạng như hải sản, thịt nguội. Toàn bộ đều có dinh dưỡng cao.</p>
              </div>
              <div class="col-sm-3 p-4 bg-danger text-white border">
                <h3 class="p-2">Thương hiệu</h3>
                <p class="p-2">Thương hiệu lâu đời đến từ Mỹ, hơn 15 năm tại Việt Nam. Đảm bảo sự uy tín tuyệt đối.</p>
              </div>
            </div>
          </div>
        </div>

        <div id="menu" class="row">
          <!-- Title what we offer -->
          <div class="col-sm-12 text-center p-4 mt-4">
            <h2><b class="p-1 border-bottom">Menu Combo Pizza 365</b></h2>
            <p><span class="p-2">Hãy chọn cỡ pizza phù hợp với bạn!</span></p>
          </div>
          <!-- Content what we offer -->
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-4">
                <div class="card">
                  <div class="card-header bg-dark text-white text-center">
                    <h3>S (small)</h3>
                  </div>
                  <div class="card-body text-center">
                    <ul class="list-group list-group-flush">
                      <li class="list-group-item">Đường kính:<b> 20 cm</b></li>
                      <li class="list-group-item">Sườn nướng:<b> 2</b></li>
                      <li class="list-group-item">Salad:<b> 200 g</b></li>
                      <li class="list-group-item">Nước ngọt:<b> 2</b></li>
                      <li class="list-group-item"><h1><b> 150.000</b></h1> VND</li>
                    </ul>
                  </div>
                  <div class="card-footer text-center">
                    <button id="btn-size-small" class="btn btn-success" data-is-selected-menu="N" onclick="onBtnSmallClick()">Chọn</button>
                  </div>
                </div>
              </div>
              <div class="col-sm-4">
                <div class="card">
                  <div class="card-header bg-secondary text-white text-center">
                    <h3>M (medium)</h3>
                  </div>
                  <div class="card-body text-center">
                    <ul class="list-group list-group-flush">
                      <li class="list-group-item">Đường kính:<b> 25 cm</b></li>
                      <li class="list-group-item">Sườn nướng:<b> 4</b></li>
                      <li class="list-group-item">Salad:<b> 300 g</b></li>
                      <li class="list-group-item">Nước ngọt:<b> 3</b></li>
                      <li class="list-group-item"><h1><b> 200.000</b></h1> VND</li>
                    </ul>
                  </div>
                  <div class="card-footer text-center">
                    <button id="btn-size-medium" class="btn btn-success" data-is-selected-menu="N" onclick="onBtnMediumClick()">Chọn</button>
                  </div>
                </div>
              </div>
              <div class="col-sm-4">
                <div class="card">
                  <div class="card-header bg-dark text-white text-center">
                    <h3>L (large)</h3>
                  </div>
                  <div class="card-body text-center">
                    <ul class="list-group list-group-flush">
                      <li class="list-group-item">Đường kính:<b> 30 cm</b></li>
                      <li class="list-group-item">Sườn nướng:<b> 8</b></li>
                      <li class="list-group-item">Salad:<b> 500 g</b></li>
                      <li class="list-group-item">Nước ngọt:<b> 4</b></li>
                      <li class="list-group-item"><h1><b> 250.000</b></h1> VND</li>
                    </ul>
                  </div>
                  <div class="card-footer text-center">
                    <button id="btn-size-large" class="btn btn-success" data-is-selected-menu="N" onclick="onBtnLargeClick()">Chọn</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="about" class="row">
          <!-- Title Loại Pizza -->
          <div class="col-sm-12 text-center p-4 mt-4">
            <h2><b class="p-2 border-bottom">Chọn loại Pizza</b></h2>
          </div>

          <!-- Content Loại Pizza -->
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-4">
                <div class="card w-100" style="width: 18rem;">
                  <img src="images/pizza_type_1.jpg" class="card-img-top">
                  <div class="card-body">
                    <h3>Hawai</h3>
                    <p>Thịt gà ta</p>
                    <p>Sự săn chắc và thơm ngon của thịt gà ta sẽ tạo ra loại bánh Pizza hấp dẫn.
                    </p>
                    <p><button id="btn-hawai" class="btn btn-info w-100"  data-is-selected-pizza = "N" onclick="onBtnHawaiClick()">Chọn</button></p>
                  </div>
                </div>
              </div>
              <div class="col-sm-4">
                <div class="card w-100" style="width: 18rem;">
                  <img src="images/pizza_type_2.jpg" class="card-img-top">
                  <div class="card-body">
                    <h3>Bacon</h3>
                    <p>Bò Nhật</p>
                    <p>Thịt bò đến từ Nhật đảm bảo sự đẳng cấp về sự tươi ngon và hương thơm siêu hấp dẫn.
                    </p>
                    <p><button id="btn-bacon" class="btn btn-info w-100"  data-is-selected-pizza = "N" onclick="onBtnBaconClick()">Chọn</button></p>
                  </div>
                </div>
              </div>
              <div class="col-sm-4">
                <div class="card w-100" style="width: 18rem;">
                  <img src="images/pizza_type_3.jpg" class="card-img-top">
                  <div class="card-body">
                    <h3>Seafood</h3>
                    <p>Cá Ngừ, Ngao</p>
                    <p>Chắt lọc những loại hải sản tươi ngon, hòa trộn lẫn nhau tạo hương vị khác biệt.
                    </p>
                    <p><button id="btn-seafood" class="btn btn-info w-100"  data-is-selected-pizza = "N" onclick="onBtnSeafoodClick()">Chọn</button></p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="form-group">
          <h2 style="margin-top: 0.5cm; text-align: center;">Đồ Uống</h2>
          <select id="select-drink" class="form-control">
            <option value="">Chọn đồ uống</option>
          </select>
        </div>
        <div id="contact" class="row">
          <!-- Title Gửi đơn hàng -->
          <div class="col-sm-12 text-center p-4 mt-4">
            <h2><b class="p-2 border-bottom">Gửi đơn hàng</b></h2>
          </div>

          <!-- Content Gửi đơn hàng -->
          <label><span style="color:red">(*): Thông tin bắt buộc</span></label><br>
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-12">
                <div class="form-group">
                  <label for="fullname">Họ và tên <span style="color:red">(*)</span></label>
                  <input type="text" class="form-control" id="inp-fullname" placeholder="Họ và tên">
                </div>
                <div class="form-group">
                  <label for="email">Email <span style="color:red">(*)</span></label>
                  <input type="text" class="form-control" id="inp-email" placeholder="Email">
                </div>
                <div class="form-group">
                  <label for="dien-thoai">Điện thoại <span style="color:red">(*)</span></label>
                  <input type="text" class="form-control" id="inp-dien-thoai" placeholder="Điện thoại">
                </div>
                <div class="form-group">
                  <label for="dia-chi">Địa chỉ <span style="color:red">(*)</span></label>
                  <input type="text" class="form-control" id="inp-dia-chi" placeholder="Địa chỉ">
                </div>
                <div class="form-group">
                  <label for="message">Lời nhắn</label>
                  <input type="text" class="form-control" id="inp-message" placeholder="Lời nhắn">
                </div>
                <div class="form-group">
                  <label for="message">Mã giảm giá</label>
                  <input type="text" class="form-control" id="inp-voucher-id" placeholder="mã giảm giá">
                </div>
                <button type="button" class="btn btn-dark w-100" onclick="onBtnKiemTraDonClick()">Kiểm tra đơn</button>
              </div>
            </div>
          </div>
          <!-- vùng hiển thị thông tin đơn hàng(order) -->
          <div id="div-container-ordercode" class="container bg-warning p-2 jumbotron" style="display: none;">
            Vùng hiển thị xác nhận đơn hàng 
          </div>
        <div id="div-container-order" class="container bg-info p-2 jumbotron" style="display: none;">
          <div id="div-order-infor" class="text-white p-3">...</div>
          <div class="p-2">
            <button id="btn-gui-don" type="button" class="btn btn-warning w-100" onclick="onBtnGuiDonClick()">Xác nhận đơn hàng</button>
          </div>
        </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="container-fluid bg-light p-5">
    <div class="row text-center">
      <div class="col-sm-12">
        <h4 class="m-2">Footer</h4>
        <a href="#" class="btn btn-dark m-3"><i class="fa fa-arrow-up"></i>To the top</a>
        <div class="m-2">
          <i class="fa fa-facebook-official w3-hover-opacity"></i>
          <i class="fa fa-instagram w3-hover-opacity"></i>
          <i class="fa fa-snapchat w3-hover-opacity"></i>
          <i class="fa fa-pinterest-p w3-hover-opacity"></i>
          <i class="fa fa-twitter w3-hover-opacity"></i>
          <i class="fa fa-linkedin w3-hover-opacity"></i>
        </div>
      </div>
    </div>
  </div>
</body>
  
<script>
"use strict";
/*** REGION 1 - Global variables - Vùng khai báo biến, hằng số, tham số TOÀN CỤC */ 
// các combo Pizza
const gCOMBO_SMALL = "Small";
const gCOMBO_MEDIUM = "Medium";
const gCOMBO_LARGE = "Large";
// Tạo biến Menu và Loại Pizza
var gMenu;
var gPizza;
// Base Url
const gBASE_URL = "http://203.171.20.210:8080/devcamp-pizza365/drinks";
const gVOUCHER_BASE_URL = "http://203.171.20.210:8080/devcamp-pizza365/voucher_detail/";
const gCREATE_BASE_URL = "http://203.171.20.210:8080/devcamp-pizza365/orders";
const gREQUEST_STATUS_OK = 200;
const gREQUEST_READY_STATUS_FINISH_AND_OK = 4;
const gREQUEST_CREATE_SUCCESS = 201; // status 201 tao thanh cong
// khai báo button
var vOrderDetailBtn = document.getElementById("btn-order-detail");
/*** REGION 2 - Vùng gán / thực thi hàm xử lý sự kiện cho các elements */
function onNavOrderDetailClick () {
  console.log("%cGọi chi tiết order ở đây", "color:blue");
  var vId = vOrderDetailBtn.getAttribute("data-id");
  var vOrderCode = vOrderDetailBtn.getAttribute("data-ordercode");
  if (vOrderCode == null || vOrderCode == ""){
    alert("Hãy ấn nút Kiểm tra đơn. Sau đó ấn nút Xác nhận đơn hàng để lấy mã đơn hàng");
    return false;
  }
  // gọi và truyền data qua form Details
  const vDETAIL_FORM_URL = "viewOrder.html"
  var vUrlSiteToOpen = vDETAIL_FORM_URL +
  "?id=" + vId +
  "&ordercode=" + vOrderCode;
  window.location.href = vUrlSiteToOpen;
}
/*** REGION 3 - Event handlers - Vùng khai báo các hàm xử lý sự kiện */
// Hàm ấn nút chọn S (small)
function onBtnSmallClick(){
//data-is-selected-menu của 3 nút Small, Medium, Large là "N"
  // Đổi màu nút chọn S (small)
  changeSizeButtonColor("Small");
  // Tạo đối tượng size small, được tham số hóa
  var vSmallSizeObj = getComboSize(gCOMBO_SMALL,"20 cm", 2, "200 g", 2, 150000);
  // gọi method hiển thị thông tin ra console
  vSmallSizeObj.displayInConsoleLog();
  gMenu = vSmallSizeObj;
}
// Hàm ấn nút chọn M (medium)
function onBtnMediumClick(){
  // Đổi màu nút chọn M (medium)
  changeSizeButtonColor("Medium");
  // Tạo đối tượng size medium, được tham số hóa
  var vMediumSizeObj = getComboSize(gCOMBO_MEDIUM,"25 cm", 4, "300 g", 3, 200000);
  // gọi method hiển thị thông tin ra console
  vMediumSizeObj.displayInConsoleLog();
  gMenu = vMediumSizeObj;
}
// Hàm ấn nút chọn L (large)
function onBtnLargeClick(){
  // Đổi màu nút chọn L (large)
  changeSizeButtonColor("Large");
  // Tạo đối tượng size large, được tham số hóa
  var vLargeSizeObj = getComboSize(gCOMBO_LARGE,"30 cm", 8, "500 g", 4, 250000);
  // gọi method hiển thị thông tin ra console
  vLargeSizeObj.displayInConsoleLog();
  gMenu = vLargeSizeObj;
}
// Hàm ấn nút chọn loại Pizza
function onBtnHawaiClick(){
// data-is-selected-pizza của 3 nút
  // Đổi màu nút chọn loại Pizza
  changePizzaButtonColor("Hawai");
  // Tạo đối tượng Pizza, được tham số hóa
  var vPizzaHawai = getPizza("Hawai");
  // gọi method hiển thị thông tin ra console
  vPizzaHawai.displayInConsoleLog();
  gPizza = "Hawai";
}
// Hàm ấn nút chọn loại Pizza
function onBtnBaconClick(){
  // Đổi màu nút chọn loại Pizza
  changePizzaButtonColor("Bacon");
  // Tạo đối tượng Pizza, được tham số hóa
  var vPizzaBacon = getPizza("Bacon");
  // gọi method hiển thị thông tin ra console
  vPizzaBacon.displayInConsoleLog();
  gPizza = "Bacon";
}
// Hàm ấn nút chọn loại Pizza
function onBtnSeafoodClick(){
  // Đổi màu nút chọn loại Pizza
  changePizzaButtonColor("Seafood");
  // Tạo đối tượng Pizza, được tham số hóa
  var vPizzaSeafood = getPizza("Seafood");
  // gọi method hiển thị thông tin ra console
  vPizzaSeafood.displayInConsoleLog();
  gPizza = "Seafood";
}
// hàm tải trang load drink list
function onPageLoading(){
  // Bước 1. Thu thập dữ liệu (Không có)
  // Bước 2. Validate (Không có)
  // Bước 3. Gọi api drink list
  var vXhttp = new XMLHttpRequest();
  callApiDrinkList(vXhttp);
  vXhttp.onreadystatechange = function (){
    if (this.readyState == gREQUEST_READY_STATUS_FINISH_AND_OK && this.status == gREQUEST_STATUS_OK){
      // Bước 4. Load dữ liệu drink list
      loadDataDrinkList(vXhttp);
    }
  }
}
// Hàm ấn nút send gửi đơn hàng
function onBtnKiemTraDonClick(){
  // Bước 0. Khai báo đối tượng
  var vOrderObj = {
    menuDuocChon: "",
    loaiPizza: "",
    loaiNuocUong: "",
    hoVaTen: "",
    email: "",
    dienThoai: "",
    diaChi: "",
    loiNhan: "",
    voucher: "",
    phanTramGiamGia: 0,
    // method giá phải thanh toán, có giảm theo mã voucher (nếu có)
    priceActualVND: function(){           
              return this.menuDuocChon.priceVND - this.menuDuocChon.priceVND * this.phanTramGiamGia * 0.01;
    }
  }
  // Bước 1. Thu thập dữ liệu
  getDataOder(vOrderObj);    
  // Bước 2. Kiểm tra getValidateData          
    if (getValidateData(vOrderObj)){
      // Bước 3. Hiển thị thông tin đơn hàng
      displaySubjectInfo(vOrderObj);     
    }                
}
// Hàm ấn nút gửi đơn để tạo đơn hàng
function onBtnGuiDonClick(){
  // Bước 0. khai báo object order để chứa thông tin đặt hàng với 14 thuộc tính
  var vOrderObj = {
    kichCo: "",
    duongKinh: "",
    suon: "",
    salad: "",
    loaiPizza: "",
    idVourcher: "",
    idLoaiNuocUong: "",
    soLuongNuoc: "",
    hoTen: "",
    thanhTien: "",
    email: "",
    soDienThoai: "",
    diaChi: "",
    loiNhan: "",
  }
  // Bước 1. Thu thập dữ liệu
  getDataOder(vOrderObj);    
  // Bước 2. Kiểm tra getValidateData          
    if (getValidateData(vOrderObj)){
      // Bước 3. Gọi Api tạo đơn hàng
      var vXmlHttpCreateOrder = new XMLHttpRequest();
      callApiCreateOrder(vXmlHttpCreateOrder,vOrderObj);
      vXmlHttpCreateOrder.onreadystatechange =
        function () {
          if (this.readyState == gREQUEST_READY_STATUS_FINISH_AND_OK && this.status == gREQUEST_CREATE_SUCCESS) { // status 201 tao thanh cong
            var vCreatedOrder = JSON.parse(vXmlHttpCreateOrder.responseText);
            // Bước 4. Hiển thị thông tin tạo đơn hàng
            //console.log(vCreatedOrder.orderCode);
            displayOrderID(vCreatedOrder.orderCode);
            // set thuộc tính id và ordercode
            vOrderDetailBtn.setAttribute("data-id",vCreatedOrder.id);
            vOrderDetailBtn.setAttribute("data-ordercode",vCreatedOrder.orderCode);
          }
        }    
    }   
}
/*** REGION 4 - Common funtions - Vùng khai báo hàm dùng chung trong toàn bộ chương trình*/
// Hàm thu thập dữ liệu
function getDataOder(paramOrderObj){
  var vDrink = document.getElementById("select-drink");
  var vDrinkValue = vDrink.value;
  var vInpHoVaTen = document.getElementById("inp-fullname");
  var vInpHoVaTenValue = vInpHoVaTen.value.trim();
  var vInpEmail = document.getElementById("inp-email");
  var vInpEmailValue = vInpEmail.value.trim()
  var vInpDienThoai = document.getElementById("inp-dien-thoai");
  var vInpDienThoaiValue = vInpDienThoai.value;
  var vInpDiaChi = document.getElementById("inp-dia-chi");
  var vInpDiaChiValue = vInpDiaChi.value.trim();
  var vInpLoiNhan = document.getElementById("inp-message");
  var vInpLoiNhanValue = vInpLoiNhan.value.trim();
  var vInpVoucher = document.getElementById("inp-voucher-id");
  var vInpVoucherValue = vInpVoucher.value;
  var vPercent = 0;
  // Gọi api check voucher id
  if (vInpVoucherValue != ""){
    vPercent = callApiCheckVoucherId(vInpVoucherValue)
  }
  paramOrderObj.phanTramGiamGia = vPercent;
  //gán thuộc tính
  paramOrderObj.menuDuocChon = gMenu;
  paramOrderObj.loaiPizza = gPizza;
  paramOrderObj.loaiNuocUong = vDrinkValue;
  paramOrderObj.hoVaTen = vInpHoVaTenValue;
  paramOrderObj.email = vInpEmailValue;
  paramOrderObj.dienThoai = vInpDienThoaiValue;
  paramOrderObj.diaChi = vInpDiaChiValue;
  paramOrderObj.loiNhan = vInpLoiNhanValue;
  paramOrderObj.voucher = vInpVoucherValue;
}
// Hàm hiển thị thông tin order object
function displaySubjectInfo(paramOrderObj){
  // Hiển thị thông tin đơn hàng
  var vThongTin = "Họ và tên: " + paramOrderObj.hoVaTen;
  vThongTin += "<br> Email: " + paramOrderObj.email;
  vThongTin += "<br> Điện thoại: " + paramOrderObj.dienThoai;
  vThongTin += "<br> Địa chỉ: " + paramOrderObj.diaChi;
  vThongTin += "<br> Lời Nhắn: " + paramOrderObj.loiNhan;
  vThongTin += "<br>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ ";
  vThongTin += "<br> Kích cỡ: " + paramOrderObj.menuDuocChon.menuName;
  vThongTin += "<br> Đường kính: " + paramOrderObj.menuDuocChon.duongKinhCM;
  vThongTin += "<br> Sườn nướng: " + paramOrderObj.menuDuocChon.suonNuong;
  vThongTin += "<br> Salad: " + paramOrderObj.menuDuocChon.saladGr;
  vThongTin += "<br> Nước ngọt: " + paramOrderObj.menuDuocChon.drink;
  vThongTin += "<br>_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ ";
  vThongTin += "<br> Loại Pizza: " + paramOrderObj.loaiPizza;
  vThongTin += "<br> Loại nước uống: " + paramOrderObj.loaiNuocUong;
  vThongTin += "<br> Mã voucher: " + paramOrderObj.voucher;
  vThongTin += "<br> Giá VND: " + paramOrderObj.menuDuocChon.priceVND;
  vThongTin += "<br> Discount %: " + paramOrderObj.phanTramGiamGia;
  vThongTin += "<br> Phải thanh toán: " + paramOrderObj.priceActualVND();
  // Tìm thẻ div container và hiện ra
  var vDivContainerOrder = document.getElementById("div-container-order");
  vDivContainerOrder.style.display = "block";
  // Tìm thẻ div chứa thông tin order
  var vDivOrderInfo = document.getElementById("div-order-infor");
  vDivOrderInfo.innerHTML = vThongTin;
}
// Hàm hiển thị Order ID tạo đơn hàng
function displayOrderID(paramOrderCode){
  // Hiển thị thông tin tạo đơn hàng
  var vThongTin = "Cảm ơn bạn đã đặt hàng tại Pizza 365. Mã đơn hàng của bạn là:";
  vThongTin += "<br> Mã đơn hàng: " + paramOrderCode;
  
  // Tìm thẻ div container và hiện ra
  var vDivContainerOrder = document.getElementById("div-container-order");
  vDivContainerOrder.style.display = "none";
  // tìm thẻ chứa vùng xác nhận đơn hàng
  var vDivContainerOrderId = document.getElementById("div-container-ordercode");
  vDivContainerOrderId.style.display = "block"
  vDivContainerOrderId.innerHTML = vThongTin;
}
// Hàm gọi Api tạo đơn hàng
function callApiCreateOrder(paramXmlHttpCreateOrder,paramOrderObj){
  paramXmlHttpCreateOrder.open("POST", gCREATE_BASE_URL, true);
  paramXmlHttpCreateOrder.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
  paramXmlHttpCreateOrder.send(JSON.stringify(paramOrderObj));
}
// Hàm gọi API check voucherID
function callApiCheckVoucherId(paramVoucherID){
  var vPercent = 0;
  // nếu mã giảm giấ đã nhập, tạo xmlHttp  request và gửi về server
  var vXmlHttp = new XMLHttpRequest();
  vXmlHttp.open("GET", gVOUCHER_BASE_URL + "/" + paramVoucherID, false);
  vXmlHttp.send();
  var vStatusCode = vXmlHttp.status;
  if (vStatusCode == gREQUEST_STATUS_OK) { // restFullAPI successful
    // nhận lại response dạng JSON ở xmlHttp.responseText và chuyển thành object
    console.log(vXmlHttp.responseText);
    var bVoucherResponse = JSON.parse(vXmlHttp.responseText);
    vPercent = bVoucherResponse.phanTramGiamGia;
    console.log("%c Phần trăm giảm giá: " + vPercent + "%","color:blue");
  }
  else {
    vPercent =0;
  }
  return vPercent;
}
// hàm kiểm tra getValidateData
function getValidateData(paramOrderObj){
        var vKetQua = true;
        var vChuyenSo = Number(paramOrderObj.dienThoai);
        if (paramOrderObj.menuDuocChon == null){
          alert("Chưa chọn Combo menu");
          vKetQua = false;
        }
        else if (paramOrderObj.loaiPizza == null){
          alert("Chưa chọn loại Pizza");
          vKetQua = false;
        }
        else if (paramOrderObj.hoVaTen == ""){
          alert("Chưa nhập họ và tên");
          vKetQua = false;
        }
        else if (!valiDateEmail(paramOrderObj)){
          vKetQua = false;
        }
        else if (vChuyenSo == ""){
          alert("Chưa nhập số điện thoại");
          vKetQua = false;
        }
        else if (isNaN(vChuyenSo)){
          alert("Số điện thoại phải là số");
          vKetQua = false;
        }
        else if (paramOrderObj.diaChi == ""){
          alert("Chưa nhập địa chỉ");
          vKetQua = false;
        }
        return vKetQua;
      }
    // Hàm kiểm tra valiDateEmail
      function valiDateEmail(paramEmail){
        var vKetQua = true;
        var vEmail = paramEmail.email;
        if (vEmail == ""){
          alert("Chưa nhập Email");
          vKetQua = false;
        }
        else if (vEmail.includes("@") == false){
          alert("Email phải có @");
          vKetQua = false;
        }
        else if (vEmail.charAt(0) == "@" || vEmail.charAt(vEmail.length-1) == "@"){
          alert("Ký tự @ không được nằm ở vị trí đầu và cuối");
          vKetQua = false;
        }
        return vKetQua;
      }
// Hàm gọi Api drink list
function callApiDrinkList(paramXhttp){
  paramXhttp.open("GET",gBASE_URL, true);
  paramXhttp.send();
}
// Hàm load data drink list và đổ dữ liệu vào selelct
function loadDataDrinkList(paramXhttp){
  // parse Json string thành Obj
  var vDrinkListObj = JSON.parse(paramXhttp.responseText);
  // tìm thẻ select
  var vSelectDrink = document.getElementById("select-drink");
  // đổ dữ liệu đồ uống lần lượt vào thẻ option được tạo ra
  for (var bIndex = 0 ; bIndex < vDrinkListObj.length ; bIndex++){
    var vOptionDrink = document.createElement("option");
    vOptionDrink.text = vDrinkListObj[bIndex].tenNuocUong;
    vSelectDrink.appendChild(vOptionDrink);
  }

}
// Hàm Đổi màu nút chọn các loại size 
function changeSizeButtonColor(paramSize){
  //1. tìm thẻ button 3 nút
  var vBtnSizeSmall = document.getElementById("btn-size-small");
  var vBtnSizeMedium = document.getElementById("btn-size-medium");
  var vBtnSizeLarge = document.getElementById("btn-size-large");
  //2. kiểm tra paramSize và đổi giá trị class (btn-warning: màu vàng, btn-success: màu xanh) và data-is-selected
  if (paramSize === "Small"){
    vBtnSizeSmall.className = "btn btn-warning";
    vBtnSizeSmall.setAttribute("data-is-selected-menu","Y");
    vBtnSizeMedium.className = "btn btn-success";
    vBtnSizeMedium.setAttribute("data-is-selected-menu","N");
    vBtnSizeLarge.className = "btn btn-success";
    vBtnSizeLarge.setAttribute("data-is-selected-menu","N");
  }
  else if (paramSize === "Medium"){
    vBtnSizeSmall.className = "btn btn-success";
    vBtnSizeSmall.setAttribute("data-is-selected-menu","N");
    vBtnSizeMedium.className = "btn btn-warning";
    vBtnSizeMedium.setAttribute("data-is-selected-menu","Y");
    vBtnSizeLarge.className = "btn btn-success";
    vBtnSizeLarge.setAttribute("data-is-selected-menu","N");
  }
  else if (paramSize === "Large"){
    vBtnSizeSmall.className = "btn btn-success";
    vBtnSizeSmall.setAttribute("data-is-selected-menu","N");
    vBtnSizeMedium.className = "btn btn-success";
    vBtnSizeMedium.setAttribute("data-is-selected-menu","N");
    vBtnSizeLarge.className = "btn btn-warning";
    vBtnSizeLarge.setAttribute("data-is-selected-menu","Y");
  }
}
// Hàm đổi màu nút chọn loại Pizza
function changePizzaButtonColor(paramPizza){
  //1. tìm thẻ button 3 nút
  var vBtnHawai = document.getElementById("btn-hawai");
  var vBtnBacon = document.getElementById("btn-bacon");
  var vBtnSeafood = document.getElementById("btn-seafood");
  //2. kiểm tra paramSize và đổi giá trị class (btn-warning: màu vàng, btn-success: màu xanh) và data-is-selected-pizza
  if (paramPizza === "Hawai"){
    vBtnHawai.className = "btn btn-warning w-100";
    vBtnHawai.setAttribute("data-is-selected-pizza","Y");
    vBtnBacon.className = "btn btn-info w-100"
    vBtnBacon.setAttribute("data-is-selected-pizza","N");
    vBtnSeafood.className = "btn btn-info w-100"
    vBtnSeafood.setAttribute("data-is-selected-pizza","N");
  }
  else if (paramPizza === "Bacon"){
    vBtnHawai.className = "btn btn-info w-100";
    vBtnHawai.setAttribute("data-is-selected-pizza","N");
    vBtnBacon.className = "btn btn-warning w-100"
    vBtnBacon.setAttribute("data-is-selected-pizza","Y");
    vBtnSeafood.className = "btn btn-info w-100"
    vBtnSeafood.setAttribute("data-is-selected-pizza","N");
  }
  else if (paramPizza === "Seafood"){
    vBtnHawai.className = "btn btn-info w-100";
    vBtnHawai.setAttribute("data-is-selected-pizza","N");
    vBtnBacon.className = "btn btn-info w-100"
    vBtnBacon.setAttribute("data-is-selected-pizza","N");
    vBtnSeafood.className = "btn btn-warning w-100"
    vBtnSeafood.setAttribute("data-is-selected-pizza","Y");
  }
}
// Hàm trả về đối tượng combo size dược tham số hóa
function getComboSize(paramMenuName,paramDuongKinhCM,paramSuonNuong,paramSaladGr,paramDrink,paramPriceVND){
  var vSelectedSizeStructure = {
    menuName: paramMenuName,
    duongKinhCM: paramDuongKinhCM,
    suonNuong: paramSuonNuong,
    saladGr: paramSaladGr,
    drink: paramDrink,
    priceVND: paramPriceVND,
    displayInConsoleLog(){
      console.log("%c Size bánh được chọn:....","color:blue");
      console.log("Kích cỡ bánh: " + this.menuName);
      console.log("Đường kính: " + this.duongKinhCM);
      console.log("Sườn Nướng: " + this.suonNuong);
      console.log("Salad: " + this.saladGr);
      console.log("Nước Ngọt: " + this.drink);
      console.log("Giá theo tháng (VND): " + this.priceVND);        
    }
  }
  // trả về đối tượng vSelectedSizeStructure
  return vSelectedSizeStructure;
}
// Hàm trả về đối tượng loại Pizza dược tham số hóa
function getPizza(paramPizza){
  var vSelectedPizzaStructure = {
    pizza: paramPizza,
    displayInConsoleLog(){
      console.log("%c Loại Pizza được chọn", "color: red");
      console.log("Loại Pizza: " + this.pizza);
    }
  }
  // trả về đối tượng vSelectedPizzaStructure
  return vSelectedPizzaStructure;
}
</script>

</html>